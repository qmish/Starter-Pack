# PHP — переменные для экспорта телеметрии в SigNoz (OTLP)
# Задайте в окружении веб-сервера (Apache/Nginx env) или перед запуском php.
#
# Документация: https://signoz.io/docs/instrumentation/opentelemetry-php/
# Требования: PHP 8.0+, PECL-расширение opentelemetry, Composer-пакеты.

# Включить авто-подгрузку инструментации (обязательно для авто-инструментации)
OTEL_PHP_AUTOLOAD_ENABLED=true

# Имя сервиса в SigNoz
OTEL_SERVICE_NAME=my-php-service

# Экспортеры: трейсы в OTLP; метрики/логи при необходимости включите
OTEL_TRACES_EXPORTER=otlp
OTEL_METRICS_EXPORTER=none
OTEL_LOGS_EXPORTER=none

# Протокол: http/protobuf рекомендуется для PHP; при использовании коллектора можно grpc
OTEL_EXPORTER_OTLP_PROTOCOL=http/protobuf
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318

# Через коллектор (локальный): endpoint без https, порт 4318 для HTTP OTLP
# OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318

# Распространение контекста между сервисами
OTEL_PROPAGATORS=baggage,tracecontext

# Трассировка: атрибуты по стеку/системе (см. docs/TRACING_SETUP.md)
OTEL_RESOURCE_ATTRIBUTES=deployment.environment=production,service.version=1.0.0
# Семплирование (если поддерживается SDK): OTEL_TRACES_SAMPLER=parentbased_traceidratio, OTEL_TRACES_SAMPLER_ARG=0.1

# Логи: уровень и error.code в атрибутах/теле лога (см. docs/LOGGING_FILTERING.md)

# --- SigNoz Cloud (прямая отправка) ---
# OTEL_EXPORTER_OTLP_PROTOCOL=http/protobuf
# OTEL_EXPORTER_OTLP_ENDPOINT=https://ingest.REGION.signoz.cloud:443
# OTEL_EXPORTER_OTLP_HEADERS=signoz-ingestion-key=<YOUR_KEY>
